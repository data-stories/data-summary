(function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&"undefined"!=typeof exports?module.exports=t():e.Papa=t()})(this,function e(){"use strict";var b=String.fromCharCode,v=Math.min;function t(){var t=k.URL||k.webkitURL||null,a=e.toString();return S.BLOB_URL||(S.BLOB_URL=t.createObjectURL(new Blob(["(",a,")();"],{type:"text/javascript"})))}function a(e){this._handle=null,this._finished=!1,this._completed=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=g(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new l(t),this._handle.streamer=this,this._config=t}.call(this,e),this.parseChunk=function(e,t){if(this.isFirstChunk&&y(this._config.beforeFirstChunk)){var a=this._config.beforeFirstChunk(e);void 0!==a&&(e=a)}this.isFirstChunk=!1;var n=this._partialLine+e;this._partialLine="";var r=this._handle.parse(n,this._baseIndex,!this._finished);if(!(this._handle.paused()||this._handle.aborted())){var i=r.meta.cursor;this._finished||(this._partialLine=n.substring(i-this._baseIndex),this._baseIndex=i),r&&r.data&&(this._rowCount+=r.data.length);var s=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(x)k.postMessage({results:r,workerId:S.WORKER_ID,finished:s});else if(y(this._config.chunk)&&!t){if(this._config.chunk(r,this._handle),this._handle.paused()||this._handle.aborted())return;r=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(r.data),this._completeResults.errors=this._completeResults.errors.concat(r.errors),this._completeResults.meta=r.meta),this._completed||!s||!y(this._config.complete)||r&&r.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),s||r&&r.meta.paused||this._nextChunk(),r}},this._sendError=function(e){y(this._config.error)?this._config.error(e):x&&this._config.error&&k.postMessage({workerId:S.WORKER_ID,error:e,finished:!1})}}function n(e){function t(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substr(t.lastIndexOf("/")+1))}e=e||{},e.chunkSize||(e.chunkSize=S.RemoteChunkSize),a.call(this,e);var n;this._nextChunk=_?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)return void this._chunkLoaded();if(n=new XMLHttpRequest,this._config.withCredentials&&(n.withCredentials=this._config.withCredentials),_||(n.onload=f(this._chunkLoaded,this),n.onerror=f(this._chunkError,this)),n.open("GET",this._input,!_),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var t in e)n.setRequestHeader(t,e[t])}if(this._config.chunkSize){var a=this._start+this._config.chunkSize-1;n.setRequestHeader("Range","bytes="+this._start+"-"+a)}try{n.send()}catch(e){this._chunkError(e.message)}_&&0===n.status?this._chunkError():this._start+=this._config.chunkSize},this._chunkLoaded=function(){return 4===n.readyState?200>n.status||400<=n.status?void this._chunkError():void(this._finished=!this._config.chunkSize||this._start>t(n),this.parseChunk(n.responseText)):void 0},this._chunkError=function(e){var t=n.statusText||e;this._sendError(new Error(t))}}function r(e){e=e||{},e.chunkSize||(e.chunkSize=S.LocalChunkSize),a.call(this,e);var t,n,r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?(t=new FileReader,t.onload=f(this._chunkLoaded,this),t.onerror=f(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var a=v(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,a)}var i=t.readAsText(e,this._config.encoding);r||this._chunkLoaded({target:{result:i}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function i(e){e=e||{},a.call(this,e);var t;this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e=this._config.chunkSize,a=e?t.substr(0,e):t;return t=e?t.substr(e):"",this._finished=!t,this.parseChunk(a)}}}function s(e){e=e||{},a.call(this,e);var t=[],n=!0,r=!1;this.pause=function(){a.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){a.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=f(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=f(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=f(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=f(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function o(e){var t=require("stream").Duplex,n=g(e),r=!0,i=!1,s=[],o=null;this._onCsvData=function(e){var t=e.data;o.push(t)||this._handle.paused()||this._handle.pause()},this._onCsvComplete=function(){o.push(null)},n.step=f(this._onCsvData,this),n.complete=f(this._onCsvComplete,this),a.call(this,n),this._nextChunk=function(){i&&1===s.length&&(this._finished=!0),s.length?s.shift()():r=!0},this._addToParseQueue=function(e,t){s.push(f(function(){if(this.parseChunk("string"==typeof e?e:e.toString(n.encoding)),y(t))return t()},this)),r&&(r=!1,this._nextChunk())},this._onRead=function(){this._handle.paused()&&this._handle.resume()},this._onWrite=function(e,t,a){this._addToParseQueue(e,a)},this._onWriteComplete=function(){i=!0,this._addToParseQueue("")},this.getStream=function(){return o},o=new t({readableObjectMode:!0,decodeStrings:!1,read:f(this._onRead,this),write:f(this._onWrite,this)}),o.once("finish",f(this._onWriteComplete,this))}function l(e){function t(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function a(){if(T&&f&&(m("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+S.DefaultDelimiter+"'"),f=!1),e.skipEmptyLines)for(var a=0;a<T.data.length;a++)t(T.data[a])&&T.data.splice(a--,1);return n()&&r(),o()}function n(){return e.header&&0===w.length}function r(){if(T){for(var t=0;n()&&t<T.data.length;t++)for(var a,r=0;r<T.data[t].length;r++)a=T.data[t][r],y(e.transformHeader)&&(a=e.transformHeader(a)),w.push(a);T.data.splice(0,1)}}function i(t){return e.dynamicTypingFunction&&void 0===e.dynamicTyping[t]&&(e.dynamicTyping[t]=e.dynamicTypingFunction(t)),!0===(e.dynamicTyping[t]||e.dynamicTyping)}function s(e,t){return i(e)?"true"===t||"TRUE"===t||"false"!==t&&"FALSE"!==t&&(b.test(t)?parseFloat(t):v.test(t)?new Date(t):""===t?null:t):t}function o(){if(!T||!e.header&&!e.dynamicTyping&&!e.transform)return T;for(var t=0;t<T.data.length;t++){var a,n=e.header?{}:[];for(a=0;a<T.data[t].length;a++){var r=a,o=T.data[t][a];e.header&&(r=a>=w.length?"__parsed_extra":w[a]),e.transform&&(o=e.transform(o,r)),o=s(r,o),"__parsed_extra"===r?(n[r]=n[r]||[],n[r].push(o)):n[r]=o}T.data[t]=n,e.header&&(a>w.length?m("FieldMismatch","TooManyFields","Too many fields: expected "+w.length+" fields but parsed "+a,x+t):a<w.length&&m("FieldMismatch","TooFewFields","Too few fields: expected "+w.length+" fields but parsed "+a,x+t))}return e.header&&T.meta&&(T.meta.fields=w),x+=T.data.length,T}function l(a,n,r,s){for(var o=Math.abs,l,d,u,m=[",","\t","|",";",S.RECORD_SEP,S.UNIT_SEP],p=0;p<m.length;p++){var h=m[p],g=0,f=0,y=0;u=void 0;for(var b=new c({comments:s,delimiter:h,newline:n,preview:10}).parse(a),v=0;v<b.data.length;v++){if(r&&t(b.data[v])){y++;continue}var k=b.data[v].length;if(f+=k,"undefined"==typeof u){u=0;continue}else 1<k&&(g+=o(k-u),u=k)}0<b.data.length&&(f/=b.data.length-y),("undefined"==typeof d||g>d)&&1.99<f&&(d=g,l=h)}return e.delimiter=l,{successful:!!l,bestDelimiter:l}}function u(e,t){e=e.substr(0,1048576);var a=new RegExp(d(t)+"([^]*?)"+d(t),"gm");e=e.replace(a,"");var s=e.split("\r"),r=e.split("\n"),n=1<r.length&&r[0].length<s[0].length;if(1===s.length||n)return"\n";for(var o=0,l=0;l<s.length;l++)"\n"===s[l][0]&&o++;return o>=s.length/2?"\r\n":"\r"}function m(e,t,a,n){T.errors.push({type:e,code:t,message:a,row:n})}var p,h,f,b=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,v=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,k=this,_=0,x=0,E=!1,C=!1,w=[],T={data:[],errors:[],meta:{}};if(y(e.step)){var N=e.step;e.step=function(t){if(T=t,n())a();else{if(a(),0===T.data.length)return;_+=t.data.length,e.preview&&_>e.preview?h.abort():N(T,k)}}}this.parse=function(t,n,r){var i=e.quoteChar||"\"";if(e.newline||(e.newline=u(t,i)),f=!1,!e.delimiter){var s=l(t,e.newline,e.skipEmptyLines,e.comments);s.successful?e.delimiter=s.bestDelimiter:(f=!0,e.delimiter=S.DefaultDelimiter),T.meta.delimiter=e.delimiter}else y(e.delimiter)&&(e.delimiter=e.delimiter(t),T.meta.delimiter=e.delimiter);var o=g(e);return e.preview&&e.header&&o.preview++,p=t,h=new c(o),T=h.parse(p,n,r),a(),E?{meta:{paused:!0}}:T||{meta:{paused:!1}}},this.paused=function(){return E},this.pause=function(){E=!0,h.abort(),p=p.substr(h.getCharIndex())},this.resume=function(){E=!1,k.streamer.parseChunk(p,!0)},this.aborted=function(){return C},this.abort=function(){C=!0,h.abort(),T.meta.aborted=!0,y(e.complete)&&e.complete(T),p=""}}function d(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function c(e){e=e||{};var t,a=e.delimiter,n=e.newline,r=e.comments,s=e.step,o=e.preview,l=e.fastMode;t=void 0===e.quoteChar?"\"":e.quoteChar;var c=t;if(void 0!==e.escapeChar&&(c=e.escapeChar),("string"!=typeof a||-1<S.BAD_DELIMITERS.indexOf(a))&&(a=","),r===a)throw new Error("Comment character same as delimiter");else!0===r?r="#":("string"!=typeof r||-1<S.BAD_DELIMITERS.indexOf(r))&&(r=!1);"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var u=0,m=!1;this.parse=function(e,p,h){function g(e){N.push(e),I=u}function f(t){var a=0;if(-1!==t){var n=e.substring(M+1,t);n&&""===n.trim()&&(a=n.length)}return a}function b(t){return h?_():("undefined"==typeof t&&(t=e.substr(u)),R.push(t),u=E,g(R),T&&x(),_())}function k(t){u=t,g(R),R=[],j=e.indexOf(n,u)}function _(e,t){return{data:t||!1?N[0]:N,errors:L,meta:{delimiter:a,linebreak:n,aborted:m,truncated:!!e,cursor:I+(p||0)}}}function x(){s(_(void 0,!0)),N=[],L=[]}if("string"!=typeof e)throw new Error("Input must be a string");var E=e.length,C=a.length,w=n.length,S=r.length,T=y(s);u=0;var N=[],L=[],R=[],I=0;if(!e)return _();if(l||!1!==l&&-1===e.indexOf(t)){for(var B=e.split(n),A=0;A<B.length;A++){if(R=B[A],u+=R.length,A!=B.length-1)u+=n.length;else if(h)return _();if(!(r&&R.substr(0,S)===r)){if(!T)g(R.split(a));else if(N=[],g(R.split(a)),x(),m)return _();if(o&&A>=o)return N=N.slice(0,o),_(!0)}}return _()}for(var M,O=e.indexOf(a,u),j=e.indexOf(n,u),q=new RegExp(d(c)+d(t),"g");;){if(e[u]===t){for(M=u,u++;;){if(M=e.indexOf(t,M+1),-1===M)return h||L.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:N.length,index:u}),b();if(M===E-1){var D=e.substring(u,M).replace(q,t);return b(D)}if(t===c&&e[M+1]===c){M++;continue}if(t===c||0===M||e[M-1]!==c){var P=-1===j?O:v(O,j),F=f(P);if(e[M+1+F]===a){R.push(e.substring(u,M).replace(q,t)),u=M+1+F+C,O=e.indexOf(a,u),j=e.indexOf(n,u);break}var z=f(j);if(e.substr(M+1+z,w)===n){if(R.push(e.substring(u,M).replace(q,t)),k(M+1+z+w),O=e.indexOf(a,u),T&&(x(),m))return _();if(o&&N.length>=o)return _(!0);break}L.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:N.length,index:u}),M++;continue}}continue}if(r&&0===R.length&&e.substr(u,S)===r){if(-1===j)return _();u=j+w,j=e.indexOf(n,u),O=e.indexOf(a,u);continue}if(-1!==O&&(O<j||-1===j)){R.push(e.substring(u,O)),u=O+C,O=e.indexOf(a,u);continue}if(-1!==j){if(R.push(e.substring(u,j)),k(j+w),T&&(x(),m))return _();if(o&&N.length>=o)return _(!0);continue}break}return b()},this.abort=function(){m=!0},this.getCharIndex=function(){return u}}function u(){if(!S.WORKERS_SUPPORTED)return!1;var e=t(),a=new k.Worker(e);return a.onmessage=m,a.id=C++,E[a.id]=a,a}function m(t){var e=t.data,a=E[e.workerId],n=!1;if(e.error)a.userError(e.error,e.file);else if(e.results&&e.results.data){var r=function(){n=!0,p(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},s={abort:r,pause:h,resume:h};if(y(a.userStep)){for(var o=0;o<e.results.data.length&&(a.userStep({data:e.results.data[o],errors:e.results.errors,meta:e.results.meta},s),!n);o++);delete e.results}else y(a.userChunk)&&(a.userChunk(e.results,s,e.file),delete e.results)}e.finished&&!n&&p(e.workerId,e.results)}function p(e,t){var a=E[e];y(a.userComplete)&&a.userComplete(t),a.terminate(),delete E[e]}function h(){throw new Error("Not implemented.")}function g(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var a in e)t[a]=g(e[a]);return t}function f(e,t){return function(){e.apply(t,arguments)}}function y(e){return"function"==typeof e}var k=function(){return"undefined"==typeof self?"undefined"==typeof window?"undefined"==typeof k?{}:k:window:self}(),_=!k.document&&!!k.postMessage,x=_&&/blob:/i.test((k.location||{}).protocol),E={},C=0,S={};if(S.parse=function(e,t){t=t||{};var a=t.dynamicTyping||!1;if(y(a)&&(t.dynamicTypingFunction=a,a={}),t.dynamicTyping=a,t.transform=!!y(t.transform)&&t.transform,t.worker&&S.WORKERS_SUPPORTED){var l=u();return l.userStep=t.step,l.userChunk=t.chunk,l.userComplete=t.complete,l.userError=t.error,t.step=y(t.step),t.chunk=y(t.chunk),t.complete=y(t.complete),t.error=y(t.error),delete t.worker,void l.postMessage({input:e,config:t,workerId:l.id})}var d=null;return e===S.NODE_STREAM_INPUT&&"undefined"==typeof PAPA_BROWSER_CONTEXT?(d=new o(t),d.getStream()):("string"==typeof e?d=t.download?new n(t):new i(t):!0===e.readable&&y(e.read)&&y(e.on)?d=new s(t):(k.File&&e instanceof File||e instanceof Object)&&(d=new r(t)),d.stream(e))},S.unparse=function(e,t){function a(e){if("object"!=typeof e)return[];var t=[];for(var a in e)t.push(a);return t}function n(e,t,a){var n="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var s=Array.isArray(e)&&0<e.length,d=!Array.isArray(t[0]);if(s&&o){for(var u=0;u<e.length;u++)0<u&&(n+=l),n+=r(e[u],u);0<t.length&&(n+=c)}for(var m=0;m<t.length;m++){var p=s?e.length:t[m].length,h=!1,g=s?0===Object.keys(t[m]).length:0===t[m].length;if(a&&!s&&(h="greedy"===a?""===t[m].join("").trim():1===t[m].length&&0===t[m][0].length),"greedy"===a&&s){for(var f,y=[],b=0;b<p;b++)f=d?e[b]:b,y.push(t[m][f]);h=""===y.join("").trim()}if(!h){for(var v=0;v<p;v++){0<v&&!g&&(n+=l);var k=s&&d?e[v]:v;n+=r(t[m][k],v)}m<t.length-1&&(!a||0<p&&!g)&&(n+=c)}}return n}function r(e,t){if("undefined"==typeof e||null===e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);e=e.toString().replace(p,u+u);var a="boolean"==typeof s&&s||Array.isArray(s)&&s[t]||i(e,S.BAD_DELIMITERS)||-1<e.indexOf(l)||" "===e.charAt(0)||" "===e.charAt(e.length-1);return a?u+e+u:e}function i(e,t){for(var a=0;a<t.length;a++)if(-1<e.indexOf(t[a]))return!0;return!1}var s=!1,o=!0,l=",",c="\r\n",u="\"",m=!1;(function(){"object"!=typeof t||("string"==typeof t.delimiter&&!S.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length&&(l=t.delimiter),("boolean"==typeof t.quotes||Array.isArray(t.quotes))&&(s=t.quotes),("boolean"==typeof t.skipEmptyLines||"string"==typeof t.skipEmptyLines)&&(m=t.skipEmptyLines),"string"==typeof t.newline&&(c=t.newline),"string"==typeof t.quoteChar&&(u=t.quoteChar),"boolean"==typeof t.header&&(o=t.header))})();var p=new RegExp(d(u),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return n(null,e,m);if("object"==typeof e[0])return n(a(e[0]),e,m)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(!e.fields&&(e.fields=e.meta&&e.meta.fields),!e.fields&&(e.fields=Array.isArray(e.data[0])?e.fields:a(e.data[0])),!Array.isArray(e.data[0])&&"object"!=typeof e.data[0]&&(e.data=[e.data])),n(e.fields||[],e.data||[],m);throw new Error("Unable to serialize unrecognized input")},S.RECORD_SEP=b(30),S.UNIT_SEP=b(31),S.BYTE_ORDER_MARK="\uFEFF",S.BAD_DELIMITERS=["\r","\n","\"",S.BYTE_ORDER_MARK],S.WORKERS_SUPPORTED=!_&&!!k.Worker,S.NODE_STREAM_INPUT=1,S.LocalChunkSize=10485760,S.RemoteChunkSize=5242880,S.DefaultDelimiter=",",S.Parser=c,S.ParserHandle=l,S.NetworkStreamer=n,S.FileStreamer=r,S.StringStreamer=i,S.ReadableStreamStreamer=s,"undefined"==typeof PAPA_BROWSER_CONTEXT&&(S.DuplexStreamStreamer=o),k.jQuery){var T=k.jQuery;T.fn.parse=function(e){function t(){if(0===s.length)return void(y(e.complete)&&e.complete());var t=s[0];if(y(e.before)){var r=e.before(t.file,t.inputElem);if("object"==typeof r){if("abort"===r.action)return void a("AbortError",t.file,t.inputElem,r.reason);if("skip"===r.action)return void n();"object"==typeof r.config&&(t.instanceConfig=T.extend(t.instanceConfig,r.config))}else if("skip"===r)return void n()}var i=t.instanceConfig.complete;t.instanceConfig.complete=function(e){y(i)&&i(e,t.file,t.inputElem),n()},S.parse(t.file,t.instanceConfig)}function a(t,a,n,r){y(e.error)&&e.error({name:t},a,n,r)}function n(){s.splice(0,1),t()}var r=e.config||{},s=[];return this.each(function(){var e="INPUT"===T(this).prop("tagName").toUpperCase()&&"file"===T(this).attr("type").toLowerCase()&&k.FileReader;if(!e||!this.files||0===this.files.length)return!0;for(var t=0;t<this.files.length;t++)s.push({file:this.files[t],inputElem:this,instanceConfig:T.extend({},r)})}),t(),this}}return x&&(k.onmessage=function(t){var e=t.data;if("undefined"==typeof S.WORKER_ID&&e&&(S.WORKER_ID=e.workerId),"string"==typeof e.input)k.postMessage({workerId:S.WORKER_ID,results:S.parse(e.input,e.config),finished:!0});else if(k.File&&e.input instanceof File||e.input instanceof Object){var a=S.parse(e.input,e.config);a&&k.postMessage({workerId:S.WORKER_ID,results:a,finished:!0})}}),n.prototype=Object.create(a.prototype),n.prototype.constructor=n,r.prototype=Object.create(a.prototype),r.prototype.constructor=r,i.prototype=Object.create(i.prototype),i.prototype.constructor=i,s.prototype=Object.create(a.prototype),s.prototype.constructor=s,"undefined"==typeof PAPA_BROWSER_CONTEXT&&(o.prototype=Object.create(a.prototype),o.prototype.constructor=o),S}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.approve=t()}(this,function(){"use strict";function e(){this.scheme="",this.valid=!1}function t(e){this.strength=e,this.points=0,this.isMinimum=!1,this.hasLower=!1,this.hasUpper=!1,this.hasNumber=!1,this.hasSpecial=!1,this.isBonus=!1,this.percent=0,this.valid=!1,this.errors=[]}var a={message:"{title} is not a valid credit card number",schemes:[{regex:/^(5610|560221|560222|560223|560224|560225)/,scheme:"Australian Bank Card"},{regex:/^(2014|2149)/,scheme:"Diner's Club"},{regex:/^36/,scheme:"Diner's Club International"},{regex:/^(30[0-5]|36|38|54|55|2014|2149)/,scheme:"Diner's Club / Carte Blanche"},{regex:/^35(2[89]|[3-8][0-9])/,scheme:"Japanese Credit Bureau"},{regex:/^(5018|5020|5038|6304|6759|676[1-3])/,scheme:"Maestro"},{regex:/^5[1-5]/,scheme:"Mastercard"},{regex:/^(6304|670[69]|6771)/,scheme:"Laser"},{regex:/^(6334|6767)/,scheme:"Solo (Paymentech)"},{regex:/^(6011|622|64|65)/,scheme:"Discover"},{regex:/^3[47]/,scheme:"American Express"},{regex:/^(4026|417500|4508|4844|491(3|7))/,scheme:"Visa Electron"},{regex:/^(4)/,scheme:"Visa"}],_getScheme:function(e){e=(""+e).replace(/\D/g,"");for(var t=this.schemes.length;t--;)if(this.schemes[t].regex.test(e))return this.schemes[t].scheme},validate:function(t){t=(""+t).replace(/\D/g,"");var a,n=new e,r=t.length,s=0,o=1;if(12>r)return!1;for(;r--;)a=t.charAt(r)*o,s+=a-9*(9<a),o^=3;return n.valid=0==s%10&&0<s,n.scheme=this._getScheme(t),n}},n={required:{validate:function(e){return!!e},message:"{title} is required",expects:!1},email:{regex:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,validate:function(e){return this.regex.test(e)},message:"{title} must be a valid email address",expects:!1},url:{regex:/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/i,validate:function(e){return this.regex.test(e)},message:"{title} must be a valid web address",expects:!1},alphaNumeric:{regex:/^[A-Za-z0-9]+$/i,validate:function(e){return this.regex.test(e)},message:"{title} may only contain [A-Za-z] and [0-9]",expects:!1},numeric:{regex:/^-?[0-9]+$/,validate:function(e){return this.regex.test(e)},message:"{title} may only contain [0-9]",expects:!1},alpha:{regex:/^[A-Za-z]+$/,validate:function(e){return this.regex.test(e)},message:"{title} may only contain [A-Za-z]",expects:!1},decimal:{regex:/^\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*$/,validate:function(e){return this.regex.test(e)},message:"{title} must be a valid decimal",expects:!1},currency:{regex:/^\s*(\+|-)?((\d+(\.\d\d)?)|(\.\d\d))\s*$/,validate:function(e){return this.regex.test(e)},message:"{title} must be a valid currency value",expects:!1},ip:{regex:{ipv4:/^(?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,ipv4Cidr:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/([0-9]|[1-2][0-9]|3[0-2]))$/,ipv6:/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,ipv6Cidr:/^s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:)))(%.+)?s*(\/([0-9]|[1-9][0-9]|1[0-1][0-9]|12[0-8]))?$/},validate:function(e){return this.regex.ipv4.test(e)||this.regex.ipv6.test(e)||this.regex.ipv4Cidr.test(e)||this.regex.ipv6Cidr.test(e)},message:"{title} must be a valid IP address",expects:!1},min:{validate:function(e,t){return"string"==typeof e&&e.length>=t.min},message:"{title} must be a minimum of {min} characters",expects:["min"]},max:{validate:function(e,t){return"string"==typeof e&&e.length<=t.max},message:"{title} must be a maximum of {max} characters",expects:["max"]},range:{validate:function(e,t){if("string"==typeof e)return e.length>=t.min&&e.length<=t.max;return!("number"!=typeof e)&&e>=t.min&&e<=t.max},message:"{title} must be a minimum of {min} and a maximum of {max} characters",expects:["min","max"]},equal:{validate:function(e,t){return""+e==""+t.value},message:"{title} must be equal to {field}",expects:["value","field"]},format:{validate:function(e,t){if("[object RegExp]"===Object.prototype.toString.call(t.regex))return t.regex.test(e);throw"approve.value(): [format] - regex is not a valid regular expression."},message:"{title} did not pass the [{regex}] test",expects:["regex"]},time:{regex:/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/,validate:function(e){return this.regex.test(e)},message:"{title} is not a valid time",expects:!1},date:{formats:{ymd:/^(?:\2)(?:[0-9]{2})?[0-9]{2}([\/-])(1[0-2]|0?[1-9])([\/-])(3[01]|[12][0-9]|0?[1-9])$/,dmy:/^(3[01]|[12][0-9]|0?[1-9])([\/-])(1[0-2]|0?[1-9])([\/-])(?:[0-9]{2})?[0-9]{2}$/},validate:function(e,t){return this.formats[t.format].test(e)},message:"{title} is not a valid date",expects:["format"]},truthy:{regex:/^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/i,validate:function(e){return this.regex.test(e)},message:"{title} is not valid",expects:!1},falsy:{regex:/^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/i,validate:function(e){return!this.regex.test(e)},message:"{title} is not valid",expects:!1},cc:a,strength:{minimum:8,minimumBonus:10,strengths:{0:"Very Weak",1:"Weak",2:"Better",3:"Almost",4:"Acceptable",5:"Strong",6:"Very Strong"},message:"{title} did not pass the strength test.",expects:["min","bonus"],errors:{isMinimum:"{title} must be at least {min} characters",hasLower:"{title} must have at least 1 lower case character",hasUpper:"{title} must have at least 1 upper case character",hasNumber:"{title} must have at least 1 number",hasSpecial:"{title} must have at least 1 special character"},_getScore:function(e){var a=Math.ceil,n=new t(this.strengths[0]);return e.length>this.minimumBonus?(n.points+=2,n.isBonus=!0,n.isMinimum=!0):e.length>this.minimum?(n.points++,n.isMinimum=!0):(n.points=1,n.isMinimum=!1),n.hasLower=null!==e.match(/[a-z]/),n.isMinimum&&n.hasLower&&n.points++,n.hasUpper=null!==e.match(/[A-Z]/),n.isMinimum&&n.hasUpper&&n.points++,n.hasNumber=null!==e.match(/\d+/),n.isMinimum&&n.hasNumber&&n.points++,n.hasSpecial=null!==e.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/),n.isMinimum&&n.hasSpecial&&n.points++,n.percent=a(100*(n.points/6)),n},_getStrength:function(e){var t=this._getScore(e);return t.strength=this.strengths[t.points],t.isMinimum||t.errors.push(this.errors.isMinimum),t.hasLower||t.errors.push(this.errors.hasLower),t.hasUpper||t.errors.push(this.errors.hasUpper),t.hasSpecial||t.errors.push(this.errors.hasSpecial),t.hasNumber||t.errors.push(this.errors.hasNumber),4<t.points&&(t.valid=!0),t},validate:function(e,t){if(this.minimum=t.min||this.minimum,this.minimumBonus=t.bonus||this.minimumBonus,t.hasOwnProperty("config")&&t.config.hasOwnProperty("messages"))for(var a in t.config.messages)t.config.messages.hasOwnProperty(a)&&(this.errors[a]=t.config.messages[a]);return this._getStrength(e)}}},r=function(){this.approved=!0,this.errors=[],this.failed=[],this.each=function(e){for(var t=e&&e.constructor&&e.call&&e.apply,a=this.errors.length;a--;)t&&e(this.errors[a])},this.filter=function(e,t){var a=t&&t.constructor&&t.call&&t.apply,n=0;if(this.hasOwnProperty(e))for(n=this[e].errors.length;n--;)a&&t(this[e].errors[n])}};return{tests:n,_format:function(e,t){return t="object"==typeof t?t:Array.prototype.slice.call(arguments,1),e.replace(/\{\{|\}\}|\{(\w+)\}/g,function(e,a){return"{{"===e?"{":"}}"===e?"}":t[a]}).trim()},_isRule:function(e){return 0>["title","stop","ignoreNull"].indexOf(e)},_start:function(e,t){var a=new r,n="",i=!1,s=!1;for(var o in t.hasOwnProperty("title")&&(n=t.title),t.hasOwnProperty("stop")&&(i=t.stop),t.hasOwnProperty("ignoreNull")&&(s=t.ignoreNull),t){if(i&&!a.approved)break;if(t.hasOwnProperty(o)&&this._isRule(o)){var l=t[o];if(this.tests.hasOwnProperty(o)){var d={constraint:l,rule:o,title:n,test:this.tests[o],value:e,ignoreNull:s};this._test(d,a)}else throw"approve.value(): "+o+" test not defined."}}return a},_test:function(e,t){if(!(e.hasOwnProperty("ignoreNull")&&!e.value&&e.ignoreNull)){var a=this._getArgs(e),n=e.test.validate(e.value,a);if(t[e.rule]={approved:!0,errors:[]},"object"==typeof n){if(t.approved=!!n.valid&&t.approved,t[e.rule].approved=n.valid,n.hasOwnProperty("errors")){var r=this._formatMessages(n.errors,e);t.errors=t.errors.concat(r),t[e.rule].errors=r}for(var i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[e.rule][i]=n[i])}else if("boolean"!=typeof n)throw"approve.value(): "+e.rule+" returned an invalid value";else t.approved=!!n&&t.approved,t[e.rule].approved=n;if(!t.approved){var s=this._formatMessage(e);t.errors.push(s),t[e.rule].errors.push(s)}n.valid||t.failed.push(e.rule)}},_eachExpected:function(e,t){if(Array.isArray(e.test.expects))for(var a=e.test.expects.length,n=a;n--;)t(e.test.expects[n],a)},_getArgs:function(e){var t={};return this._eachExpected(e,function(a,n){if(e.constraint.hasOwnProperty(a))t[a]=e.constraint[a];else if(1>=n&&(/^[A-Za-z0-9]+$/i.test(e.constraint)||"[object RegExp]"===toString.call(e.constraint)))t[a]=e.constraint;else throw"approve.value(): "+e.rule+" expects the "+a+" parameter."}),e.constraint.hasOwnProperty("config")&&(t.config=e.constraint.config),t},_getFormat:function(e){var t={};return this._eachExpected(e,function(a){e.constraint.hasOwnProperty(a)&&(t[a]=e.constraint[a]),/^[A-Za-z0-9]+$/i.test(e.constraint)&&(t[a]=e.constraint)}),t.title=e.title,t},_formatMessages:function(e,t){for(var a=this._getFormat(t),n=e.length;n--;)e[n]=this._format(e[n],a);return e},_formatMessage:function(e){var t,a=this._getFormat(e);return e.constraint.hasOwnProperty("message")?(t=e.constraint.message,this._format(t,a)):(t=e.test.message,this._format(t,a))},value:function(e,t){if("object"!=typeof t)throw"approve.value(value, rules): rules is not a valid object.";return this._start(e,t)},addTest:function(e,t){if("object"!=typeof e)throw"approve.addTest(obj, name): obj is not a valid object.";try{this.tests.hasOwnProperty(t)||(this.tests[t]=e)}catch(t){throw"approve.addTest(): "+t.message}}}}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ClipboardJS=t():e.ClipboardJS=t()}(this,function(){return function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var r in e)t.d(n,r,function(t){return e[t]}.bind(null,r));return n},t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){var a="data-clipboard-"+e;return t.hasAttribute(a)?t.getAttribute(a):void 0}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=function(){function e(e,t){for(var a,n=0;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(1),u=n(c),m=a(3),p=n(m),h=a(4),g=n(h),f=function(e){function t(e,a){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.resolveOptions(a),n.listenClick(e),n}return s(t,e),d(t,[{key:"resolveOptions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===l(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,g.default)(e,"click",function(a){return t.onClick(a)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new u.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(e){return o("action",e)}},{key:"defaultTarget",value:function(e){var t=o("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return o("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,a=!!document.queryCommandSupported;return t.forEach(function(e){a=a&&!!document.queryCommandSupported(e)}),a}}]),t}(p.default);e.exports=f},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var a,n=0;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(2),o=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(){function e(t){n(this,e),this.resolveOptions(t),this.initSelection()}return i(e,[{key:"resolveOptions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var a=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=a+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,o.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,o.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error("Invalid \"action\" value, use either \"copy\" or \"cut\"")},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e)if(e&&"object"===("undefined"==typeof e?"undefined":r(e))&&1===e.nodeType){if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error("Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute");if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error("Invalid \"target\" attribute. You can't cut text from elements with \"readonly\" or \"disabled\" attributes");this._target=e}else throw new Error("Invalid \"target\" value, use a valid Element")},get:function(){return this._target}}]),e}();e.exports=l},function(e){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var a=e.hasAttribute("readonly");a||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),a||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),r=document.createRange();r.selectNodeContents(e),n.removeAllRanges(),n.addRange(r),t=n.toString()}return t}},function(e){function t(){}t.prototype={on:function(t,a,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:a,ctx:n}),this},once:function(e,t,a){function n(){r.off(e,n),t.apply(a,arguments)}var r=this;return n._=t,this.on(e,n,a)},emit:function(e){var t=[].slice.call(arguments,1),a=((this.e||(this.e={}))[e]||[]).slice(),n=0,r=a.length;for(n;n<r;n++)a[n].fn.apply(a[n].ctx,t);return this},off:function(t,a){var n=this.e||(this.e={}),e=n[t],r=[];if(e&&a)for(var s=0,o=e.length;s<o;s++)e[s].fn!==a&&e[s].fn._!==a&&r.push(e[s]);return r.length?n[t]=r:delete n[t],this}},e.exports=t},function(e,t,a){function n(e,t,a){return e.addEventListener(t,a),{destroy:function(){e.removeEventListener(t,a)}}}function r(e,t,a){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,a)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,a)})}}}function i(e,t,a){return o(document.body,e,t,a)}var s=a(5),o=a(6);e.exports=function(e,t,a){if(!e&&!t&&!a)throw new Error("Missing required arguments");if(!s.string(t))throw new TypeError("Second argument must be a String");if(!s.fn(a))throw new TypeError("Third argument must be a Function");if(s.node(e))return n(e,t,a);if(s.nodeList(e))return r(e,t,a);if(s.string(e))return i(e,t,a);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(e,t){t.node=function(e){return e!==void 0&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var a=Object.prototype.toString.call(e);return e!==void 0&&("[object NodeList]"===a||"[object HTMLCollection]"===a)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},function(e,t,a){function n(e,t,a,n,i){var s=r.apply(this,arguments);return e.addEventListener(a,s,i),{destroy:function(){e.removeEventListener(a,s,i)}}}function r(t,a,n,r){return function(n){n.delegateTarget=i(n.target,a),n.delegateTarget&&r.call(t,n)}}var i=a(7);e.exports=function(e,t,a,r,i){return"function"==typeof e.addEventListener?n.apply(null,arguments):"function"==typeof a?n.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,function(e){return n(e,t,a,r,i)}))}},function(e){if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&e.nodeType!==9;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}}])}),!function(t){var e="object"==typeof window&&window||"object"==typeof self&&self;"undefined"==typeof exports?e&&(e.hljs=t({}),"function"==typeof define&&define.amd&&define([],function(){return e.hljs})):t(exports)}(function(m){function _(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function S(t){return t.nodeName.toLowerCase()}function T(a,e){var n=a&&a.exec(e);return n&&0===n.index}function N(t){return y.test(t)}function a(a){var e,s,d,c,u=a.className+" ";if(u+=a.parentNode?a.parentNode.className:"",s=k.exec(u))return l(s[1])?s[1]:"no-highlight";for(u=u.split(/\s+/),e=0,d=u.length;d>e;e++)if(c=u[e],N(c)||l(c))return c}function t(a){var i,s={},e=Array.prototype.slice.call(arguments,1);for(i in a)s[i]=a[i];return e.forEach(function(t){for(i in t)s[i]=t[i]}),s}function i(t){var s=[];return function t(n,e){for(var r=n.firstChild;r;r=r.nextSibling)3===r.nodeType?e+=r.nodeValue.length:1===r.nodeType&&(s.push({event:"start",offset:e,node:r}),e=t(r,e),S(r).match(/br|hr|img|input/)||s.push({event:"stop",offset:e,node:r}));return e}(t,0),s}function c(t,e,n){function a(){return t.length&&e.length?t[0].offset===e[0].offset?"start"===e[0].event?t:e:t[0].offset<e[0].offset?t:e:t.length?t:e}function r(t){u+="<"+S(t)+h.map.call(t.attributes,function(t){return" "+t.nodeName+"=\""+_(t.value).replace("\"","&quot;")+"\""}).join("")+">"}function i(t){u+="</"+S(t)+">"}function o(t){("start"===t.event?r:i)(t.node)}for(var d,c=0,u="",m=[];t.length||e.length;)if(d=a(),u+=_(n.substring(c,d[0].offset)),c=d[0].offset,d===t){m.reverse().forEach(i);do o(d.splice(0,1)[0]),d=a();while(d===t&&d.length&&d[0].offset===c);m.reverse().forEach(r)}else"start"===d[0].event?m.push(d[0].node):m.pop(),o(d.splice(0,1)[0]);return u+_(n.substr(c))}function n(a){return a.v&&!a.cached_variants&&(a.cached_variants=a.v.map(function(e){return t(a,{v:null},e)})),a.cached_variants||a.eW&&[t(a)]||[a]}function r(a){function e(t){return t&&t.source||t}function s(n,t){return new RegExp(e(n),"m"+(a.cI?"i":"")+(t?"g":""))}function t(r,l){if(!r.compiled){if(r.compiled=!0,r.k=r.k||r.bK,r.k){var i={},o=function(r,e){a.cI&&(e=e.toLowerCase()),e.split(" ").forEach(function(a){var e=a.split("|");i[e[0]]=[r,e[1]?+e[1]:1]})};"string"==typeof r.k?o("keyword",r.k):b(r.k).forEach(function(t){o(t,r.k[t])}),r.k=i}r.lR=s(r.l||/\w+/,!0),l&&(r.bK&&(r.b="\\b("+r.bK.split(" ").join("|")+")\\b"),r.b||(r.b=/\B|\b/),r.bR=s(r.b),r.endSameAsBegin&&(r.e=r.b),r.e||r.eW||(r.e=/\B|\b/),r.e&&(r.eR=s(r.e)),r.tE=e(r.e)||"",r.eW&&l.tE&&(r.tE+=(r.e?"|":"")+l.tE)),r.i&&(r.iR=s(r.i)),null==r.r&&(r.r=1),r.c||(r.c=[]),r.c=Array.prototype.concat.apply([],r.c.map(function(t){return n("self"===t?r:t)})),r.c.forEach(function(a){t(a,r)}),r.starts&&t(r.starts,l);var d=r.c.map(function(t){return t.bK?"\\.?("+t.b+")\\.?":t.b}).concat([r.tE,r.i]).map(e).filter(Boolean);r.t=d.length?s(d.join("|"),!0):{exec:function(){return null}}}}t(a)}function u(n,e,t,a){function i(t){return new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")}function o(r,e){var n,s;for(n=0,s=e.c.length;s>n;n++)if(T(e.c[n].bR,r))return e.c[n].endSameAsBegin&&(e.c[n].eR=i(e.c[n].bR.exec(r)[0])),e.c[n]}function c(t,a){if(T(t.eR,a)){for(;t.endsParent&&t.parent;)t=t.parent;return t}return t.eW?c(t.parent,a):void 0}function g(a,e){return!t&&T(e.iR,a)}function s(a,e){var n=N.cI?e[0].toLowerCase():e[0];return a.k.hasOwnProperty(n)&&a.k[n]}function p(s,e,n,t){var r=t?"":w.classPrefix,a="<span class=\""+r,l=n?"":C;return a+=s+"\">",a+e+l}function d(){var n,i,o,l;if(!I.k)return _(j);for(l="",i=0,I.lR.lastIndex=0,o=I.lR.exec(j);o;)l+=_(j.substring(i,o.index)),n=s(I,o),n?(q+=n[1],l+=p(n[0],_(o[0]))):l+=_(o[0]),i=I.lR.lastIndex,o=I.lR.exec(j);return l+_(j.substr(i))}function h(){var a="string"==typeof I.sL;if(a&&!v[I.sL])return _(j);var e=a?u(I.sL,j,!0,O[I.sL]):f(j,I.sL.length?I.sL:void 0);return 0<I.r&&(q+=e.r),a&&(O[I.sL]=e.top),p(e.language,e.value,!1,!0)}function b(){B+=null==I.sL?d():h(),j=""}function L(t){B+=t.cN?p(t.cN,"",!0):"",I=Object.create(t,{parent:{value:I}})}function m(i,e){if(j+=i,null==e)return b(),0;var n=o(e,I);if(n)return n.skip?j+=e:(n.eB&&(j+=e),b(),n.rB||n.eB||(j=e)),L(n,e),n.rB?0:e.length;var t=c(I,e);if(t){var r=I;r.skip?j+=e:(r.rE||r.eE||(j+=e),b(),r.eE&&(j=e));do I.cN&&(B+=C),I.skip||I.sL||(q+=I.r),I=I.parent;while(I!==t.parent);return t.starts&&(t.endSameAsBegin&&(t.starts.eR=t.eR),L(t.starts,"")),r.rE?0:e.length}if(g(e,I))throw new Error("Illegal lexeme \""+e+"\" for mode \""+(I.cN||"<unnamed>")+"\"");return j+=e,e.length||1}var N=l(n);if(!N)throw new Error("Unknown language: \""+n+"\"");r(N);var R,I=a||N,O={},B="";for(R=I;R!==N;R=R.parent)R.cN&&(B=p(R.cN,"",!0)+B);var j="",q=0;try{for(var D,P,F=0;;){if(I.t.lastIndex=F,D=I.t.exec(e),!D)break;P=m(e.substring(F,D.index),D[0]),F=D.index+P}for(m(e.substr(F)),R=I;R.parent;R=R.parent)R.cN&&(B+=C);return{r:q,value:B,language:n,top:I}}catch(t){if(t.message&&-1!==t.message.indexOf("Illegal"))return{r:0,value:_(e)};throw t}}function f(i,e){e=e||w.languages||b(v);var s={r:0,value:_(i)},o=s;return e.filter(l).filter(d).forEach(function(e){var a=u(e,i,!1);a.language=e,a.r>o.r&&(o=a),a.r>s.r&&(o=s,s=a)}),o.language&&(s.second_best=o),s}function g(t){return w.tabReplace||w.useBR?t.replace(E,function(t,e){return w.useBR&&"\n"===t?"<br>":w.tabReplace?e.replace(/\t/g,w.tabReplace):""}):t}function p(i,e,n){var t=e?x[e]:n,r=[i.trim()];return i.match(/\bhljs\b/)||r.push("hljs"),-1===i.indexOf(t)&&r.push(t),r.join(" ").trim()}function s(d){var e,m,h,y,b,v=a(d);N(v)||(w.useBR?(e=document.createElementNS("http://www.w3.org/1999/xhtml","div"),e.innerHTML=d.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):e=d,b=e.textContent,h=v?u(v,b,!0):f(b),m=i(e),m.length&&(y=document.createElementNS("http://www.w3.org/1999/xhtml","div"),y.innerHTML=h.value,h.value=c(m,i(y),b)),h.value=g(h.value),d.innerHTML=h.value,d.className=p(d.className,v,h.language),d.result={language:h.language,re:h.r},h.second_best&&(d.second_best={language:h.second_best.language,re:h.second_best.r}))}function e(a){w=t(w,a)}function o(){if(!o.called){o.called=!0;var t=document.querySelectorAll("pre code");h.forEach.call(t,s)}}function l(t){return t=(t||"").toLowerCase(),v[t]||v[x[t]]}function d(t){var e=l(t);return e&&!e.disableAutodetect}var h=[],b=Object.keys,v={},x={},y=/^(no-?highlight|plain|text)$/i,k=/\blang(?:uage)?-([\w-]+)\b/i,E=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,C="</span>",w={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0};return m.highlight=u,m.highlightAuto=f,m.fixMarkup=g,m.highlightBlock=s,m.configure=e,m.initHighlighting=o,m.initHighlightingOnLoad=function(){addEventListener("DOMContentLoaded",o,!1),addEventListener("load",o,!1)},m.registerLanguage=function(a,e){var t=v[a]=e(m);t.aliases&&t.aliases.forEach(function(t){x[t]=a})},m.listLanguages=function(){return b(v)},m.getLanguage=l,m.autoDetection=d,m.inherit=t,m.IR="[a-zA-Z]\\w*",m.UIR="[a-zA-Z_]\\w*",m.NR="\\b\\d+(\\.\\d+)?",m.CNR="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",m.BNR="\\b(0b[01]+)",m.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",m.BE={b:"\\\\[\\s\\S]",r:0},m.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[m.BE]},m.QSM={cN:"string",b:"\"",e:"\"",i:"\\n",c:[m.BE]},m.PWM={b:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},m.C=function(e,n,t){var r=m.inherit({cN:"comment",b:e,e:n,c:[]},t||{});return r.c.push(m.PWM),r.c.push({cN:"doctag",b:"(?:TODO|FIXME|NOTE|BUG|XXX):",r:0}),r},m.CLCM=m.C("//","$"),m.CBCM=m.C("/\\*","\\*/"),m.HCM=m.C("#","$"),m.NM={cN:"number",b:m.NR,r:0},m.CNM={cN:"number",b:m.CNR,r:0},m.BNM={cN:"number",b:m.BNR,r:0},m.CSSNM={cN:"number",b:m.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},m.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[m.BE,{b:/\[/,e:/\]/,r:0,c:[m.BE]}]},m.TM={cN:"title",b:m.IR,r:0},m.UTM={cN:"title",b:m.UIR,r:0},m.METHOD_GUARD={b:"\\.\\s*"+m.UIR,r:0},m}),hljs.registerLanguage("json",function(a){var e={literal:"true false null"},i=[a.QSM,a.CNM],n={e:",",eW:!0,eE:!0,c:i,k:e},r={b:"{",e:"}",c:[{cN:"attr",b:/"/,e:/"/,c:[a.BE],i:"\\n"},a.inherit(n,{b:/:/})],i:"\\S"},t={b:"\\[",e:"\\]",c:[a.inherit(n)],i:"\\S"};return i.splice(i.length,0,r,t),{c:i,k:e,i:"\\S"}}),hljs.registerLanguage("plaintext",function(){return{disableAutodetect:!0}}),document.addEventListener("DOMContentLoaded",function(){function e(){ie.addEventListener("focus",N),ie.addEventListener("blur",L),ie.addEventListener("change",a),ne.addEventListener("click",n),re.addEventListener("click",t),Te.addEventListener("click",j),Me.addEventListener("click",g),je.addEventListener("click",R),Oe.addEventListener("click",I),fe.querySelector("button").addEventListener("click",A),ue.addEventListener("click",o),addEventListeners(ke,"change",M),addEventListeners(_e,"change",O),addEventListeners(de,"click",B),addEventListeners(be,"change",q),qe.addEventListener("click",function(){f("summary.txt",Ie.value,"text/plain")}),De.addEventListener("click",function(){f("summary.csv",Y,"text/csv")}),Pe.addEventListener("click",function(){f("summary.json",Z,"text/plain")}),Fe.addEventListener("click",function(){f("summary.json",X,"text/plain")})}function t(){u();var e=ie.files;return e.length?void(re.disabled=!0,removeClass(le,"hidden"),Papa.parse(e[0],{header:!0,error:d,complete:r})):void alert("Please choose a file.")}function a(){var e=(this.files[0].size/1024/1024).toFixed(1);return 100<e?(alert("File is too big!"),void(this.value="")):void u()}function n(){ie.value=null,u()}function r(e,t){W=e,V=D(),re.disabled=!1,addClass(le,"hidden"),H(ye,V),H(ve,$),h(t),0<W.errors.length?l():i()}function i(){re.disabled=!1,addClass(me,"d-hide"),s(te),removeClass(pe,"d-hide")}function s(e){for(var t=0,a=J.length;t<a;t++)removeClass(J[t],"active");addClass(e,"active")}function o(){i()}function l(){addClass(ce,"active");var e=ce.querySelector("ul");emptyNode(e);for(var t=0;t<W.errors.length;t++){var a=W.errors[t],n=document.createElement("li");n.appendChild(document.createTextNode("Row "+a.row+" - "+a.message)),e.appendChild(n)}}function d(){alert("Sorry, your file could not be read. Please try again or choose another file.")}function c(){for(var e,t=0;t<G.length;t++)e=G[t],K[e]=document.getElementById(e)}function u(){V=null,W=null,U(),m(),p(),z(),ge.reset()}function m(){addClass(xe,"hidden"),addClass(Ee,"hidden"),addClass(Ce,"hidden"),ze.removeValidation("timeframe-start"),ze.removeValidation("timeframe-end"),ke[1].checked=!0,_e[1].checked=!0}function p(){for(var e=document.querySelectorAll(".header-desc-input"),t=1;t<e.length;t++)e[t].parentNode.removeChild(e[t])}function h(e){K.headers.value=P(),K.columns.value=Object.size(W.data[0]),K.format.value=e.name.split(".").pop(),K.rows.value=W.data.length,K["empty-cell-count"].value=F()}function g(t){t.preventDefault(),ze.validateAll(),ze.isValid()?(addClass(pe,"d-hide"),addClass(fe,"d-hide"),y(),Ne.innerHTML=Q,window.scrollTo(0,0),s(ae),removeClass(he,"d-hide")):(window.scrollTo(0,0),removeClass(fe,"d-hide"))}function f(e,t,a){var n=document.createElement("a");n.setAttribute("href",encodeURI("data:"+a+";charset=utf-8,"+t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function y(){var e=b(),t=k(e),a=x(e),n=w(a);Y=S(n),summaryJSON=T(a,e),X=JSON.stringify(summaryJSON),Z=JSON.stringify(summaryJSON,null,2),_(t),E(a),Re.innerHTML=Y,Be.innerHTML=Z,Ae.innerHTML=X,document.querySelectorAll("pre code").forEach(e=>{hljs.highlightBlock(e)})}function b(){function e(e,t){return""==e||""==t?"":e+" to "+t}var t={};for(var a in K)if(K.hasOwnProperty(a)){var n=K[a].value;"headers"!=a&&(n=v(n)),t[a]=n?n:""}return t["key-col-one-range"]=e(t["key-col-one-min"],t["key-col-one-max"]),t["key-col-two-range"]=e(t["key-col-two-min"],t["key-col-two-max"]),t["key-col-three-range"]=e(t["key-col-three-min"],t["key-col-three-max"]),t["header-descriptions"]=function(){for(var e=[],t=document.getElementsByClassName("hd-select"),a=document.getElementsByClassName("hd-input"),n=0,r=t.length;n<r;n++){var s=t[n].value,o=a[n].value;s&&o&&e.push({header:s,description:v(o)})}return e}(),t["geo-area"]=function(){for(var e=document.getElementsByName("geo-area[]"),t=[],a=0,n=e.length;a<n;a++)e[a].checked&&t.push(e[a].value);return 0<t.length?t:""}(),t["geo-detail"]=function(){return t["geo-area"]||t["geo-area-other"]?t["geo-detail"]:""}(),t.format=t.format.toUpperCase(),t}function v(e){return e.trim().replace(/(^[\.!,])|([\.!,]$)/g,"")}function k(e){var t="This is a "+e.format+" file about "+e.about,a="It has "+e.columns+" columns and "+e.rows+" rows",n="The columns describe, for example, "+e["key-col-one"]+" (type: "+e["key-col-one-type"];n+=e["key-col-one-range"]?", range: "+e["key-col-one-range"]+"), ":"), ",n+=e["key-col-two"]+" (type: "+e["key-col-two-type"],n+=e["key-col-two-range"]?", range: "+e["key-col-two-range"]+"), ":"), ",n+=e["key-col-three"]+" (type: "+e["key-col-three-type"],n+=e["key-col-three-range"]?", range: "+e["key-col-three-range"]+")":")",n+=e["headers-grouping"]?" and shows information about "+e["headers-grouping"]:"";var r="It was published by "+e.publisher;r+=e["published-date"]?" on "+e["published-date"]:"";var i="";e["collected-date"]&&e["last-updated-date"]?i+="The data was collected on "+e["collected-date"]+" and last updated on "+e["last-updated-date"]:e["collected-date"]?i+="The data was collected on "+e["collected-date"]:e["last-updated-date"]&&(i+="The data was last updated on "+e["last-updated-date"]);var s="";e["timeframe-start"]||e["timeframe-end"]?s+="The data covers the timeframe from "+e["timeframe-start"]+" to "+e["timeframe-end"]:e["timeframe-other"]&&(s+="Date/time information is presented as "+e["timeframe-other"]);var o="";e["geo-area-other"]?o+="The location covered by the data is "+e["geo-area-other"]:e["geo-area"]&&(o+="The location covered by the data is "+e["geo-area"].join(", ")),e["geo-detail"]&&(e["geo-area-other"]||e["geo-area"])&&(o+=" to the level of "+e["geo-detail"]);var l="There are "+e["empty-cell-count"]+" missing-values";0<e["empty-cell-count"]&&e["quality-a"]&&(l+=" and these mean "+e["quality-a"]);var d=e["quality-b"]?"Other quality aspects include: "+e["quality-b"]:"",c=e["analysis-a"]?"Trends/patterns in the data: "+e["analysis-a"]:"",u=e["analysis-b"]?"Further analysis: "+e["analysis-b"]:"";return[t,a,n,r,i,s,o,l,d,c,u]}function _(e){var t=e.filter(function(e){return""!=e}).join(". ")+".";Ie.value=t}function x(e){for(var t=e.about,a=e.format+" file with "+e.columns+" columns and "+e.rows+" rows",n=e["anything-else"],r=e.headers,s=e["headers-grouping"]?"Headers grouping: "+e["headers-grouping"]:"",o=[],d=["one","two","three"],c=0,u=3;c<u;c++)o[c]=e["key-col-"+d[c]]+" (type: "+e["key-col-"+d[c]+"-type"],o[c]+=e["key-col-"+d[c]+"-range"]?", range: "+e["key-col-"+d[c]+"-range"]+")":")";var m="Published by "+e.publisher;m+=e["published-date"]?" on "+e["published-date"]:"";var p="";e["timeframe-start"]||e["timeframe-end"]?p+="The data covers the timeframe from "+e["timeframe-start"]+" to "+e["timeframe-end"]:e["timeframe-other"]&&(p+="Date/time information is presented as "+e["timeframe-other"]);var h="";e["geo-area-other"]?h+="The location covered by the data is "+e["geo-area-other"]:e["geo-area"]&&(h+="The location covered by the data is "+e["geo-area"].join(", ")),e["geo-detail"]&&(e["geo-area-other"]||e["geo-area"])&&(h+=" to the level of "+e["geo-detail"]);var g="There are "+e["empty-cell-count"]+" missing-values";0<e["empty-cell-count"]&&e["quality-a"]&&(g+=" and these mean "+e["quality-a"]);var f=e["quality-b"]?"Other quality aspects include: "+e["quality-b"]:"",y=[];if(0<e["header-descriptions"].length)for(var c=0,u=e["header-descriptions"].length;c<u;c++)y[c]=e["header-descriptions"][c].header+": "+e["header-descriptions"][c].description;var b=e["analysis-a"]?"Trends/patterns in the data: "+e["analysis-a"]:"",v=e["analysis-b"]?"Further analysis: "+e["analysis-b"]:"";return[t,a,n,r,s,o,m,p,h,g,f,y,b,v]}function E(e){var t=C(e),a=document.createDocumentFragment();t.forEach(function(e){var t=e.td.map(function(e){return[]!=e.content&&""!=e.content}).reduce(function(e,t){return e||t});if(t){var n=document.createElement("tr"),r=document.createElement("th"),i=document.createElement("td");r.appendChild(document.createTextNode(e.th)),a.appendChild(n),n.appendChild(r),e.td.forEach(function(e){if([]!=e.content&&""!=e.content){if(e.heading){var t=document.createElement("p");t.className="text-bold mt-1",t.appendChild(document.createTextNode(e.heading)),i.appendChild(t)}if(isArray(e.content)){var a=document.createElement("ul");e.content.forEach(function(e){var t=document.createElement("li");t.appendChild(document.createTextNode(e)),a.appendChild(t)}),i.appendChild(a)}else{var n=document.createElement("p");n.appendChild(document.createTextNode(e.content)),i.appendChild(n)}}}),n.appendChild(i)}});var n=document.createElement("table");n.appendChild(a),emptyNode(Le),Le.appendChild(n)}function C(e){return[{th:"About",td:[{content:e[0]}]},{th:"Format",td:[{content:e[1]},{content:e[2]}]},{th:"Headers",td:[{content:e[3]},{content:e[4]}]},{th:"Example headers",td:[{content:e[5]}]},{th:"Provenance",td:[{content:e[6]}]},{th:"Time",td:[{content:e[7]}]},{th:"Location",td:[{content:e[8]}]},{th:"Quality",td:[{content:e[9]},{content:e[10]},{heading:"Header descriptions",content:e[11]}]},{th:"Analysis",td:[{content:e[12]},{content:e[13]}]}]}function w(e){var t=C(e),a=[];return t.forEach(function(e){var t=e.td.map(function(e){return[]!=e.content&&""!=e.content}).reduce(function(e,t){return e||t});if(t){var n=[e.th],r="";e.td.forEach(function(e){[]!=e.content&&""!=e.content&&(e.heading&&(r+=e.heading),isArray(e.content)?e.content.forEach(function(e){r+=e}):r+=e.content)}),n.push(r),a.push(n)}}),a}function S(e){var t="";return e.forEach(function(e){e.forEach(function(e){var e=e.replace(/"/g,"\"\"");t+="\""+e+"\","}),t+="\r\n"}),t.slice(0,-2)}function T(e,t){function a(e){for(var t in e)isObject(e[t])?isEmpty(e[t])?delete e[t]:a(e[t]):isArray(e[t])?0==e[t].length?delete e[t]:n(e[t]):""==e[t]&&delete e[t]}function n(e){for(var t=0,r=e.length;t<r;t++)isObject(e[t])?a(e[t]):isArray(e[t])?n(e[t]):""==e[t]&&e.splice(t,1)}var r={about:e[0],format:{description:e[1],"file type":t.format,columns:t.columns,rows:t.rows,"anything else":t["anything-else"]},headers:{headers:V,"important headers":[{description:e[5][0],name:t["key-col-one"],type:t["key-col-one-type"],"range min":t["key-col-one-min"],"range max":t["key-col-one-max"]},{description:e[5][1],name:t["key-col-two"],type:t["key-col-two-type"],"range min":t["key-col-two-min"],"range max":t["key-col-two-max"]},{description:e[5][2],name:t["key-col-three"],type:t["key-col-three-type"],"range min":t["key-col-three-min"],"range max":t["key-col-three-max"]}],"headers grouping":t["headers-grouping"]},provenance:{description:e[6],publisher:t.publisher,"published date":t["published-date"]},time:{description:e[7],"timeframe start":t["timeframe-start"],"timeframe end":t["timeframe-end"],"timeframe other":t["timeframe-other"]},location:{description:e[8],coverage:t["geo-area-other"]?t["geo-area-other"]:t["geo-area"],"detail level":t["geo-detail"]},quality:{"missing values":{description:e[9],count:t["empty-cell-count"],significance:t["quality-a"]},other:{description:e[10],other:t["quality-b"]},"header descriptions":t["header-descriptions"]},analysis:{patterns:t["analysis-a"],"further-analysis":t["analysis-b"]}};return a(r),a(r),r}function N(){addClass(ie,"has-focus")}function L(){removeClass(ie,"has-focus")}function R(t){t.preventDefault(),addClass(he,"d-hide"),s(te),removeClass(pe,"d-hide"),window.scrollTo(0,0)}function I(t){t.preventDefault(),addClass(pe,"d-hide"),addClass(fe,"d-hide"),s(ee),removeClass(me,"d-hide"),window.scrollTo(0,0),u()}function B(t){t.preventDefault(),removeClass(ce,"active")}function A(t){t.preventDefault(),addClass(fe,"d-hide")}function M(){"time-yes"==this.id&&(removeClass(xe,"hidden"),removeClass(Ce,"hidden")),"time-no"==this.id&&(addClass(xe,"hidden"),addClass(Ee,"hidden"),addClass(Ce,"hidden"),document.getElementById("timespan-no").checked=!0,ze.removeValidation("timeframe-start"),ze.removeValidation("timeframe-end"),K["timeframe-start"].value=null,K["timeframe-end"].value=null)}function O(){"timespan-yes"==this.id&&(removeClass(Ee,"hidden"),addClass(Ce,"hidden"),ze.addValidation({name:"timeframe-start",rules:{required:!0,customDate:!0}}),ze.addValidation({name:"timeframe-end",rules:{required:!0,customDate:!0}}),K["timeframe-other"].value=null),"timespan-no"==this.id&&(addClass(Ee,"hidden"),removeClass(Ce,"hidden"),ze.removeValidation("timeframe-start"),ze.removeValidation("timeframe-end"),K["timeframe-start"].value=null,K["timeframe-end"].value=null)}function j(e){e.preventDefault();var t=document.getElementsByClassName("header-desc-input").length+1;if(10>=t){var a=Se[0].cloneNode(!0),n=a.querySelectorAll("select")[0],r=a.querySelectorAll("input")[0];n.value=r.value="",a.children[1].className="column col-7 form-group";var i=new Date().getTime();n.id=n.name=n.previousElementSibling.htmlFor="header-"+i,r.id=r.name=r.previousElementSibling.htmlFor="header-desc-"+i;var s=document.createDocumentFragment(),o=document.createElement("div"),l=document.createElement("button");o.className="column col-2 form-group",l.className="btn remove-header-desc-input",l.appendChild(document.createTextNode("Remove \u2013")),o.appendChild(l),s.appendChild(o),a.appendChild(s),l.addEventListener("click",function(){a.parentNode.removeChild(a)}),we.appendChild(a)}}function q(){for(var e,t,a=W.data,n=this.value,r=this.name,s=document.getElementById(r+"-min"),o=document.getElementById(r+"-max"),d=0,c=a.length;d<c;d++)for(var l in a[d])if(l==n){var u=+a[d][l];isNaN(u)||(0==d?e=t=u:(u<e&&(e=u),u>t&&(t=u)))}e!=null&&t!=null?(s.value=e,o.value=t):(s.value="",o.value="")}function D(){var e=W.meta.fields;return e.map(function(e){return""==e?"NULL":e})}function P(){var e=V.join(", ");return 1e3<e.length?e.substring(0,1e3)+"...":e}function F(){for(var e=0,t=W.data,a=0,n=t.length;a<n;a++)for(var r in t[a])t[a][r]||(e+=1);return e}function z(){var e=document.querySelectorAll(".has-error");if(e)for(var t,a=0;a<e.length;a++)t=e[a].querySelector(".form-input-hint"),removeClass(e[a],"has-error"),t.parentNode.removeChild(t)}function U(){var e;if(ie&&ie.files&&1==ie.files.length){Q=ie.files[0].name,e=ie.files[0].size;for(var t=["Bytes","KB","MB"],a=0;900<e;)e/=1024,a++;var n=Math.round(100*e)/100+" "+t[a];addClass(se,"label-success")}else Q="No file chosen",removeClass(se,"label-success");emptyNode(se),emptyNode(oe),se.appendChild(document.createTextNode(Q)),n&&oe.appendChild(document.createTextNode(" \xB7 "+n))}function H(e,t){for(var a=0;a<e.length;a++){var n=document.createDocumentFragment(),r=document.createElement("option");r.appendChild(document.createTextNode("please choose")),r.selected=!0,r.value="",n.appendChild(r);for(var s,o=0;o<t.length;o++)s=document.createElement("option"),s.appendChild(document.createTextNode(t[o])),s.value=t[o],n.appendChild(s);emptyNode(e[a]),e[a].appendChild(n)}}var W=null,V=null,K={},Q="",Y="",X="",Z="",$=["whole number","decimal","binary","date","category","letters and/or numbers"],G=["about","format","columns","rows","anything-else","headers","key-col-one","key-col-one-type","key-col-one-min","key-col-one-max","key-col-two","key-col-two-type","key-col-two-min","key-col-two-max","key-col-three","key-col-three-type","key-col-three-min","key-col-three-max","headers-grouping","publisher","published-date","last-updated-date","collected-date","timeframe-start","timeframe-end","timeframe-other","geo-area-other","geo-detail","empty-cell-count","quality-a","quality-b","analysis-a","analysis-b"],J=document.getElementsByClassName("step-item"),ee=document.getElementById("step-1"),te=document.getElementById("step-2"),ae=document.getElementById("step-3"),ne=document.getElementById("clear"),re=document.getElementById("parse"),ie=document.getElementById("file"),se=document.getElementById("selected-file-name"),oe=document.getElementById("selected-file-size"),le=document.getElementById("parsing-file-message"),de=document.getElementsByClassName("upload-alert-close"),ce=document.getElementById("upload-alert"),ue=document.getElementById("upload-alert-continue"),me=document.getElementById("upload-view"),pe=document.getElementById("questionnaire-view"),he=document.getElementById("summary-view"),ge=document.getElementById("questionnaire-form"),fe=document.getElementById("form-alert"),ye=document.getElementsByClassName("col-select"),be=document.getElementsByClassName("key-col-select"),ve=document.getElementsByClassName("col-type-select"),ke=document.getElementsByName("time"),_e=document.getElementsByName("timespan"),xe=document.getElementById("time-question-two"),Ee=document.getElementById("time-question-three"),Ce=document.getElementById("time-question-four"),we=document.getElementById("header-desc-input-container"),Se=document.getElementsByClassName("header-desc-input"),Te=document.getElementById("add-header-desc-input"),Ne=document.getElementById("summary-file-name"),Le=document.getElementById("summary-table"),Re=document.getElementById("summary-table-csv"),Ie=document.getElementById("summary-text-editable"),Be=document.getElementById("summary-json-formatted"),Ae=document.getElementById("summary-json"),Me=document.getElementById("submit"),Oe=document.getElementById("questionnaire-back"),je=document.getElementById("summary-back"),qe=document.getElementById("download-summary-text"),De=document.getElementById("download-summary-table-csv"),Pe=document.getElementById("download-summary-json-formatted"),Fe=document.getElementById("download-summary-json"),ze=new Validator([{name:"about",rules:{required:!0,max:200}},{name:"format",rules:{required:!0}},{name:"columns",rules:{required:!0,numeric:!0}},{name:"rows",rules:{required:!0,numeric:!0}},{name:"headers",rules:{required:!0}},{name:"key-col-one",rules:{required:!0}},{name:"key-col-one-type",rules:{required:!0}},{name:"key-col-two",rules:{required:!0}},{name:"key-col-two-type",rules:{required:!0}},{name:"key-col-three",rules:{required:!0}},{name:"key-col-three-type",rules:{required:!0}},{name:"publisher",rules:{required:!0}},{name:"last-updated-date",rules:{ignoreNull:!0,customDate:!0}},{name:"collected-date",rules:{ignoreNull:!0,customDate:!0}}]);(function(){initClipboard(),ze.attachInputValidation(),c(),U(),e(),u()})()},!1);function emptyNode(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function hasClass(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")}function addClass(e,t){hasClass(e,t)||(e.className+=" "+t)}function removeClass(e,t){var a=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(hasClass(e,t)){for(;0<=a.indexOf(" "+t+" ");)a=a.replace(" "+t+" "," ");e.className=a.replace(/^\s+|\s+$/g,"")}}function addEventListeners(e,t,a){for(var n=0;n<e.length;n++)e[n].addEventListener(t,a)}function removeEventListeners(e,t,a){for(var n=0;n<e.length;n++)e[n].removeEventListener(t,a)}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),Object.size=function(e){var t,a=0;for(t in e)e.hasOwnProperty(t)&&a++;return a};function isArray(e){return e&&"object"==typeof e&&e.constructor===Array}function isObject(e){return e&&"object"==typeof e&&e.constructor===Object}function isEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Validator(e){var t=function(e){var t=document.getElementsByName(e.name)[0];return approve.value(t.value,e.rules).approved},a=function(e){var t=document.getElementsByName(e.name)[0];t.validationObj=e,t.addEventListener("blur",r),t.addEventListener("input",r),t.addEventListener("keyup",r),t.addEventListener("change",r),t.addEventListener("paste",r)},n=function(e){var t=document.getElementsByName(e.name)[0];t.removeEventListener("blur",r),t.removeEventListener("input",r),t.removeEventListener("keyup",r),t.removeEventListener("change",r),t.removeEventListener("paste",r)},r=function(t){s(t.currentTarget,t.currentTarget.validationObj)},s=function(e,t){var a=approve.value(e.value,t.rules);!1==a.approved?o(e,a.errors):l(e)},o=function(e,t){var a=e.parentNode,n=a.querySelector(".form-input-hint"),r=document.createElement("p");n&&n.parentNode.removeChild(n),addClass(a,"has-error"),addClass(r,"form-input-hint"),a.appendChild(r),r.appendChild(document.createTextNode("This field "));for(var s=0;s<t.length;s++)r.appendChild(document.createTextNode(t[s])),s<t.length-1&&r.appendChild(document.createTextNode(" and "))},l=function(e){var t=e.parentNode,a=t.querySelector(".form-input-hint");a&&a.parentNode.removeChild(a),removeClass(t,"has-error")},d=function(t){for(var a=!1,n=0,r=e.length;n<r;n++)e[n].name==t&&(a=e[n]);return a};return{attachInputValidation:function(){for(var t=0;t<e.length;t++)a(e[t])},detachInputValidation:function(){for(var t=0;t<e.length;t++)n(e[t])},addValidation:function(t){a(t),e.push(t)},removeValidation:function(t){var a=document.getElementsByName(t)[0],r=d(t);if(r){n(r),l(a);for(var s=a.name,o=0;o<e.length;o++)s==e[o].name&&e.splice(o,1)}},validateInput:function(t){for(var a=t.name,n=0;n<e.length;n++)if(a==e[n].name)return void s(t,e[n])},isValid:function(){return e.map(function(e){return t(e)}).reduce(function(e,t){return e&&t})},validateAll:function(){for(var t,a=0;a<e.length;a++)t=document.getElementsByName(e[a].name)[0],s(t,e[a])}}}approve.addTest({expects:!0,message:"{title} must contain a date, for example, 23/05/1972, or 05/1972, or just 1972",validate:function(e){var t=/^(\d{1,2})[-\/](\d{1,2})[-\/](\d{3,4})$/.exec(e),a=/^(\d{1,2})[-\/](\d{3,4})$/.exec(e),n=/^(\d{3,4})$/.exec(e);if(t){var r=t[1],i=t[2]-1,s=t[3],o=new Date(s,i,r,0,0,0,0);return o.getDate()==r&&o.getMonth()==i&&o.getFullYear()==s}if(a){var i=a[1]-1,s=a[2],o=new Date(s,i,1,0,0,0,0);return o.getMonth()==i&&o.getFullYear()==s}if(n){var s=n[1],o=new Date(s,0,1,0,0,0,0);return o.getFullYear()==s}return!1}},"customDate");function initClipboard(){var e=document.querySelectorAll("[data-clipboard-target]"),t=new ClipboardJS(e);addEventListeners(e,"mouseleave",function(t){removeClass(t.currentTarget,"tooltip"),t.currentTarget.removeAttribute("data-tooltip")}),t.on("success",function(t){addClass(t.trigger,"tooltip"),t.trigger.setAttribute("data-tooltip","Copied"),t.clearSelection()}),t.on("error",function(t){addClass(t.trigger,"tooltip"),t.trigger.setAttribute("data-tooltip","Press Ctrl+C (Windows) or Cmd+C (Mac) to copy")})}
